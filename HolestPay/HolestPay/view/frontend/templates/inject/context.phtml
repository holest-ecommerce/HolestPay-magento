<?php
/** @var $block \Magento\Framework\View\Element\Template */
// Best-effort: populate order increment id on success/failure pages and customer email when logged in
$objectManager = \Magento\Framework\App\ObjectManager::getInstance();
/** @var \Magento\Checkout\Model\Session $checkoutSession */
$checkoutSession = $objectManager->get(\Magento\Checkout\Model\Session::class);
$incrementId = $checkoutSession->getLastRealOrderId();
$orderId = null;
if ($incrementId) {
    $order = $objectManager->create(\Magento\Sales\Model\Order::class)->loadByIncrementId($incrementId);
    if ($order && $order->getId()) {
        $orderId = (int)$order->getId();
    }
}
/** @var \Magento\Customer\Model\Session $customerSession */
$customerSession = $objectManager->get(\Magento\Customer\Model\Session::class);
$customerEmail = $customerSession->isLoggedIn() ? (string)$customerSession->getCustomer()->getEmail() : null;
?>
<script type="application/json" id="holestpay-context-data">{"orderId":<?= $orderId ? (int)$orderId : 'null' ?>,"customerEmail":<?= $customerEmail ? ('"' . $block->escapeHtml($customerEmail) . '"') : 'null' ?>}</script>


